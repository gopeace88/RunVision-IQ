# Garmin ì›Œì¹˜ â†” iLens ìŠ¤ë§ˆíŠ¸ ê¸€ë˜ìŠ¤ í†µí•© ê¸°ìˆ  ë¶„ì„

## ë¬¸ì„œ ê°œìš”

ë³¸ ë¬¸ì„œëŠ” Garmin Forerunner ì‹œë¦¬ì¦ˆì˜ **Virtual Run ê¸°ëŠ¥**ì„ í™œìš©í•˜ì—¬ iLens ìŠ¤ë§ˆíŠ¸ ê¸€ë˜ìŠ¤ì™€ ì§ì ‘ í†µí•©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê¸°ìˆ  ë¶„ì„ì…ë‹ˆë‹¤.

**ë¶„ì„ ì¼ì**: 2025ë…„ 10ì›” 23ì¼  
**í•µì‹¬ ë°œê²¬**: Virtual Runì„ ì‚¬ìš©í•˜ë©´ Garmin Connect Mobile ì—†ì´ ì›Œì¹˜ì—ì„œ iLensë¡œ ì§ì ‘ ë°ì´í„° ì „ì†¡ ê°€ëŠ¥

**ë¶„ì„ ëŒ€ìƒ**:
- Garmin Virtual Run Feature (í‘œì¤€ BLE Broadcasting)
- iLens BLE Protocol v1.0.10
- ì§ì ‘ í†µí•© ì•„í‚¤í…ì²˜

---

## 1. Virtual Run: ê²Œì„ ì²´ì¸ì €

### 1.1 Virtual Runì´ë€?

Virtual Runì€ Garmin ì›Œì¹˜ê°€ ëŸ¬ë‹ ë°ì´í„°(ì†ë„, ì‹¬ë°•ìˆ˜, ì¼€ì´ë˜ìŠ¤)ë¥¼ í‘œì¤€ Bluetooth í”„ë¡œí•„ì„ í†µí•´ ì§ì ‘ ë¸Œë¡œë“œìºìŠ¤íŒ…í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤. ì›ë˜ëŠ” Zwift ê°™ì€ ê°€ìƒ ëŸ¬ë‹ í”Œë«í¼ê³¼ì˜ í†µí•©ì„ ìœ„í•´ ê°œë°œë˜ì—ˆìœ¼ë‚˜, **ëª¨ë“  BLE í˜¸í™˜ ì•±ì—ì„œ ì‚¬ìš© ê°€ëŠ¥**í•©ë‹ˆë‹¤.

**í•µì‹¬ íŠ¹ì§•**:
- âœ… **ì§ì ‘ BLE ë¸Œë¡œë“œìºìŠ¤íŒ…**: Garmin Connect Mobile ë¶ˆí•„ìš”
- âœ… **í‘œì¤€ BLE í”„ë¡œí•„ ì‚¬ìš©**: Running Speed & Cadence (RSC), Heart Rate (HR)
- âœ… **ì™¸ë¶€ ì„¼ì„œ ì¬ì „ì†¡**: ANT+ footpod/HRMì„ BLEë¡œ ì¬ë¸Œë¡œë“œìºìŠ¤íŒ…
- âœ… **ë™ì‹œ ê¸°ë¡**: ì›Œì¹˜ì—ë„ ë°ì´í„° ì €ì¥ ê°€ëŠ¥

### 1.2 ì§€ì› ëª¨ë¸

Virtual Runì€ ë‹¤ìŒ Garmin ì›Œì¹˜ì—ì„œ ì§€ì›ë©ë‹ˆë‹¤:

| ì‹œë¦¬ì¦ˆ | ëª¨ë¸ | ì¶œì‹œ ì‹œê¸° |
|--------|------|-----------|
| **Forerunner** | 245, 245 Music | 2019 |
| | 945 | 2019 |
| | 55 | 2021 |
| | 255, 255 Music, 255s | 2022 |
| | 165, 165 Music | 2024 |
| | 265, 265s | 2023 |
| | 955, 965 | 2022-2023 |
| **Fenix** | 6, 6S, 6X ì‹œë¦¬ì¦ˆ | 2019 |
| | 7, 7S, 7X ì‹œë¦¬ì¦ˆ | 2022 |
| | 8 ì‹œë¦¬ì¦ˆ | 2024 |
| **MARQ** | All Collection | 2019+ |
| **tactix** | Delta | 2020 |

**ëŸ¬ë„ˆë¥¼ ìœ„í•œ ì¶”ì²œ ëª¨ë¸**:
- ğŸ¥‡ **Forerunner 965**: ìµœì‹  AMOLED ë””ìŠ¤í”Œë ˆì´, ìµœê³  ì„±ëŠ¥
- ğŸ¥ˆ **Forerunner 265**: ê°€ì„±ë¹„ ìš°ìˆ˜, AMOLED
- ğŸ¥‰ **Forerunner 255**: ê²€ì¦ëœ ì•ˆì •ì„±, ê¸´ ë°°í„°ë¦¬

### 1.3 ì‘ë™ ë°©ì‹

Virtual Run ëª¨ë“œì—ì„œ Garmin ì›Œì¹˜ëŠ” BLE peripheralë¡œ ì‘ë™í•˜ë©°, í‘œì¤€ Bluetooth Smart í”„ë¡œí•„ì„ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ë¸Œë¡œë“œìºìŠ¤íŠ¸í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Garmin Forerunner       â”‚
â”‚  (Virtual Run Activity)  â”‚
â”‚                          â”‚
â”‚  - Accelerometer ê°ì§€    â”‚
â”‚  - ì‹¬ë°•ìˆ˜ ì„¼ì„œ           â”‚
â”‚  - ANT+ ì„¼ì„œ ìˆ˜ì‹        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ BLE Broadcasting
         â”‚ (í‘œì¤€ RSC + HR í”„ë¡œí•„)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  iLens Bridge App        â”‚
â”‚  (BLE Central/Scanner)   â”‚
â”‚                          â”‚
â”‚  - RSC ë°ì´í„° íŒŒì‹±       â”‚
â”‚  - iLens í¬ë§· ë³€í™˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ BLE GATT Write
         â”‚ (iLens ì»¤ìŠ¤í…€ í”„ë¡œí† ì½œ)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  iLens Smart Glass       â”‚
â”‚  (AR Display)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.4 ì „ì†¡ë˜ëŠ” ë°ì´í„°

| ë°ì´í„° íƒ€ì… | BLE í”„ë¡œí•„ | UUID | ì„¤ëª… |
|-------------|-----------|------|------|
| **ì†ë„** | RSC | 0x1814 | m/s ë˜ëŠ” km/h |
| **ì¼€ì´ë˜ìŠ¤** | RSC | 0x1814 | steps/min (spm) |
| **ì‹¬ë°•ìˆ˜** | HR | 0x180D | beats/min (bpm) |

**ë°ì´í„° íŠ¹ì„±**:
- ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ (1ì´ˆ ê°„ê²©)
- ì†ëª© ê¸°ë°˜ ì†ë„ëŠ” ì •í™•ë„ê°€ ë‚®ì„ ìˆ˜ ìˆìœ¼ë‚˜, Stryd ê°™ì€ ANT+ footpodë¥¼ ì›Œì¹˜ì— ì—°ê²°í•˜ë©´ ë” ì •í™•í•œ ë°ì´í„°ë¥¼ ì¬ì „ì†¡í•©ë‹ˆë‹¤
- ì›Œì¹˜ì™€ ì—°ê²°ëœ ì•±ì˜ ë°ì´í„° ì¼ì¹˜ ë³´ì¥

### 1.5 GarminLiveì™€ì˜ ì°¨ì´ì 

| í•­ëª© | GarminLive (Connect IQ) | Virtual Run |
|------|------------------------|-------------|
| ì¤‘ê°œì | Garmin Connect Mobile í•„ìš” | **ë¶ˆí•„ìš”** |
| í”„ë¡œí† ì½œ | Communications API | **í‘œì¤€ BLE** |
| ì—°ê²° ë³µì¡ë„ | 3-tier | **2-tier** |
| ì§€ì—° ì‹œê°„ | 200-500ms | **50-100ms** |
| ê°œë°œ ë‚œì´ë„ | ë†’ìŒ (SDK 2ê°œ) | **ì¤‘ê°„** (BLEë§Œ) |
| ë°°í„°ë¦¬ íš¨ìœ¨ | ì¤‘ê°„ | **ìš°ìˆ˜** |

### 1.6 Virtual Run ì œì•½ì‚¬í•­ âš ï¸

Virtual Run ëª¨ë“œëŠ” ì›Œì¹˜ë¥¼ **BLE ì„¼ì„œ(ì‹¬ë°•ìˆ˜ + ì†ë„ + ì¼€ì´ë˜ìŠ¤)**ë¡œ ì „í™˜í•˜ëŠ” ê¸°ëŠ¥ì´ê¸° ë•Œë¬¸ì—, ì¼ë°˜ ëŸ¬ë‹ ëª¨ë“œì™€ ë¹„êµí–ˆì„ ë•Œ ëª‡ ê°€ì§€ ì œì•½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤.

#### 1.6.1 BLE ì—­í•  ì „í™˜: Peripheral ëª¨ë“œ

**ì œì•½**:
- Virtual Runì„ ì¼œë©´ ì›Œì¹˜ê°€ **BLE Peripheral(ì„¼ì„œ ì—­í• )**ë¡œ ì „í™˜ë©ë‹ˆë‹¤
- ì›Œì¹˜ê°€ "ì„¼ì„œ"ê°€ ë˜ì–´ í°/íƒœë¸”ë¦¿ì´ Central(ìˆ˜ì‹ ì)ë¡œ ì—°ê²°ë©ë‹ˆë‹¤
- ì´ ìƒíƒœì—ì„œëŠ” ë‹¤ë¥¸ BLE ì—°ê²°ì´ ì œí•œë©ë‹ˆë‹¤

**ì˜í–¥**:
```
âŒ Garmin Connect Mobile ì•± ë™ì‹œ ì—°ê²° ë¶ˆê°€
âŒ ë¬´ì„  ì´ì–´í°/ìŒì•… ìŠ¤íŠ¸ë¦¬ë° ë¶ˆê°€
âŒ ìŠ¤ë§ˆíŠ¸í° ì•Œë¦¼ ìˆ˜ì‹  ì¤‘ë‹¨
âŒ ConnectIQ ì•± í†µì‹  ì¤‘ë‹¨
```

**í•´ê²°ì±…**:
- Virtual Run ì‹œì‘ ì „ì— Garmin Connect Mobile ì•±ì„ ì™„ì „íˆ ì¢…ë£Œ
- ìŒì•…ì´ í•„ìš”í•˜ë©´ ì›Œì¹˜ ë‚´ì¥ ìŒì•… ì¬ìƒ ì‚¬ìš© (ë¸”ë£¨íˆ¬ìŠ¤ ì´ì–´í°ì€ ë¶ˆê°€)
- ì•Œë¦¼ì´ í•„ìš” ì—†ëŠ” ìš´ë™ ì‹œê°„ëŒ€ì— ì‚¬ìš©

#### 1.6.2 í™œë™ íƒ€ì… ì œí•œ

**ì œì•½**:
- Virtual Runì€ **ëŸ¬ë‹ ì „ìš©** ëª¨ë“œì…ë‹ˆë‹¤
- ì‚¬ì´í´ë§, í•˜ì´í‚¹, ê¸°íƒ€ ìš´ë™ì—ì„œëŠ” ì‚¬ìš© ë¶ˆê°€
- ìš´ë™ ì‹œì‘ í›„ ëª¨ë“œ ë³€ê²½ ë¶ˆê°€ (ì •ì§€ í›„ ì¬ì‹œì‘ í•„ìš”)

**ì˜í–¥**:
```
âœ… ì§€ì›: ëŸ¬ë‹, íŠ¸ë ˆë“œë°€ ëŸ¬ë‹
âŒ ë¯¸ì§€ì›: ì‚¬ì´í´ë§, ì›Œí‚¹, í•˜ì´í‚¹, íŠ¸ë¼ì´ì• ìŠ¬ë¡ 
```

**ì°¸ê³ **:
- ì‚¬ì´í´ë§ ë²„ì „ì¸ "Virtual Bike" ëª¨ë“œëŠ” ì•„ì§ ê³µì‹ ì¶œì‹œë˜ì§€ ì•ŠìŒ
- ì¼ë¶€ ì‚¬ìš©ìê°€ Virtual Runì„ ì‚¬ì´í´ë§ì— ì‚¬ìš©í•˜ì§€ë§Œ ë¹„ê¶Œì¥

#### 1.6.3 ë°°í„°ë¦¬ ì†Œëª¨ ì¦ê°€

**ì œì•½**:
- BLE ë¸Œë¡œë“œìºìŠ¤íŠ¸ + ì„¼ì„œ í™œì„±í™” + 1Hz ì „ì†¡ ì£¼ê¸°
- ì¼ë°˜ ëŸ¬ë‹ ëª¨ë“œ ëŒ€ë¹„ **15-25% ë°°í„°ë¦¬ ì†Œëª¨ ì¦ê°€**

**ì˜ˆìƒ ë°°í„°ë¦¬ ìˆ˜ëª…**:

| ì›Œì¹˜ ëª¨ë¸ | ì¼ë°˜ ëŸ¬ë‹ | Virtual Run |
|-----------|-----------|-------------|
| Forerunner 265 | ~20ì‹œê°„ | ~15-17ì‹œê°„ |
| Forerunner 955 | ~42ì‹œê°„ | ~32-35ì‹œê°„ |
| Forerunner 55 | ~20ì‹œê°„ | ~15-17ì‹œê°„ |

**ìµœì í™” íŒ**:
- GPS ì •í™•ë„ë¥¼ "ì¼ë°˜"ìœ¼ë¡œ ì„¤ì • (UltraTrack ëª¨ë“œ ì‚¬ìš©)
- í™”ë©´ ë°ê¸° ìë™ ì¡°ì ˆ
- ë°±ë¼ì´íŠ¸ íƒ€ì„ì•„ì›ƒ ì§§ê²Œ ì„¤ì •
- ë¶ˆí•„ìš”í•œ ì„¼ì„œ ë¹„í™œì„±í™”

#### 1.6.4 ANT+ / BLE ì„¼ì„œ ì¶©ëŒ

**ì œì•½**:
- Virtual Runì´ BLEë¡œ ì‹¬ë°•ìˆ˜ë¥¼ ë¸Œë¡œë“œìºìŠ¤íŠ¸í•˜ê¸° ë•Œë¬¸ì— ì¼ë¶€ ì„¼ì„œ ì¶©ëŒ ê°€ëŠ¥
- êµ¬í˜• ëª¨ë¸(FR245 ì´ì „, Fenix 5 ë“±)ì€ ANT+ HR Strap ìë™ ë¹„í™œì„±í™”

**ì„¼ì„œ í˜¸í™˜ì„±**:

| ì„¼ì„œ íƒ€ì… | ì—°ê²° ë°©ì‹ | Virtual Run í˜¸í™˜ |
|-----------|-----------|------------------|
| ANT+ HR Strap | ANT+ | âš ï¸ ëª¨ë¸ì— ë”°ë¼ ë‹¤ë¦„ |
| Stryd Footpod | ANT+ | âœ… ì¬ì „ì†¡ ê°€ëŠ¥ |
| Garmin Footpod | ANT+ | âœ… ì¬ì „ì†¡ ê°€ëŠ¥ |
| BLE HR Strap | BLE | âŒ ì¶©ëŒ (ì›Œì¹˜ë„ BLE Peripheral) |

**ê¶Œì¥ ì„¤ì •**:
- **Stryd ì‚¬ìš© ì‹œ**: ANT+ë¡œ ì›Œì¹˜ì— ì—°ê²° â†’ Virtual Runì´ BLEë¡œ ì¬ì „ì†¡
- **HR Strap ì‚¬ìš© ì‹œ**: ANT+ HR Strap ì‚¬ìš© (ìµœì‹  ëª¨ë¸ì—ì„œ ì§€ì›)
- **ê´‘í•™ ì‹¬ë°•ìˆ˜**: ì›Œì¹˜ ë‚´ì¥ ì„¼ì„œ ì‚¬ìš© (ê°€ì¥ ì•ˆì •ì )

#### 1.6.5 GPS ë° ê±°ë¦¬ ê³„ì‚°

**ì œì•½**:
- Virtual Run ëª¨ë“œì—ì„œëŠ” **GPS ê¸°ë³¸ OFF** (íŠ¸ë ˆë“œë°€ ì „ìš© ì„¤ê³„)
- ê°€ì†ë„ê³„ ê¸°ë°˜ ê±°ë¦¬/í˜ì´ìŠ¤ ê³„ì‚° ì‚¬ìš©

**ì •í™•ë„**:

| ë°©ë²• | ì •í™•ë„ | ìƒí™© |
|------|--------|------|
| ê°€ì†ë„ê³„ë§Œ (ì†ëª©) | Â±5-10% | ê¸°ë³¸ê°’ |
| Stryd Footpod | Â±1-2% | ìµœê³  ì •í™•ë„ |
| GPS (ì‹¤ì™¸) | Â±2-3% | Virtual Runì—ì„œë„ í™œì„±í™” ê°€ëŠ¥ |

**GPS í™œì„±í™” ë°©ë²•**:
```
ì„¤ì • â†’ Virtual Run â†’ GPS â†’ ON
(ì‹¤ì™¸ ëŸ¬ë‹ ì‹œ ê¶Œì¥)
```

**ì£¼ì˜ì‚¬í•­**:
- GPSë¥¼ ì¼œë„ Zwift/iLens ì•±ìœ¼ë¡œëŠ” RSC ì†ë„ë§Œ ì „ì†¡ë¨
- GPS ë°ì´í„°ëŠ” ì›Œì¹˜ ê¸°ë¡ì—ë§Œ ì €ì¥ë¨

#### 1.6.6 ë°ì´í„° ì €ì¥ ë° ë™ê¸°í™”

**ì œì•½**:
- Virtual Run ì„¸ì…˜ ì¤‘ì—ëŠ” **Garmin Connect Mobileê³¼ ì‹¤ì‹œê°„ ë™ê¸°í™” ë¶ˆê°€**
- ì„¸ì…˜ ì¢…ë£Œ í›„ Connect ì•±ì„ ì—´ë©´ ìë™ ì—…ë¡œë“œ

**ë°ì´í„° íë¦„**:
```
ëŸ¬ë‹ ì¤‘:
ì›Œì¹˜ â†’ BLE â†’ iLens ì•± (ì‹¤ì‹œê°„)
ì›Œì¹˜ ë‚´ë¶€ ì €ì¥ (ë³„ë„)

ëŸ¬ë‹ ì¢…ë£Œ í›„:
ì›Œì¹˜ â†’ Garmin Connect Mobile â†’ Garmin Connect í´ë¼ìš°ë“œ
```

**í•´ê²°ì±…**:
- ìš´ë™ ì¤‘ Garmin Connect Mobile ì•± ì¢…ë£Œ
- ìš´ë™ í›„ ì•± ì¬ì‹¤í–‰í•˜ì—¬ ìë™ ë™ê¸°í™”
- í™œë™ ë°ì´í„°ëŠ” ì†ì‹¤ë˜ì§€ ì•ŠìŒ

#### 1.6.7 BLE ì—°ê²° ìˆ˜ ì œí•œ

**ì œì•½**:
- BLE Peripheral ëª¨ë“œì—ì„œëŠ” **ë™ì‹œì— 1ê°œì˜ Centralë§Œ ì—°ê²° ê°€ëŠ¥**
- í° ì•± + iLensë¥¼ ë™ì‹œì— ì§ì ‘ ì—°ê²° ë¶ˆê°€

**ì—°ê²° ì‹œë‚˜ë¦¬ì˜¤**:

```
âŒ ë¶ˆê°€ëŠ¥í•œ êµ¬ì¡°:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Forerunner â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â†’ í° ì•± (Central 1)
       â””â”€â”€â”€â”€â”€â”€â”€â”€â†’ iLens (Central 2)  â† ë™ì‹œ ì—°ê²° ë¶ˆê°€!

âœ… ì˜¬ë°”ë¥¸ êµ¬ì¡°:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Forerunner â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ BLE
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   í° ì•±     â”‚  (Central = ë¸Œë¦¬ì§€)
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ BLE
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   iLens     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì•„í‚¤í…ì²˜ ì˜í–¥**:
- í° ì•±ì´ **í•„ìˆ˜ ë¸Œë¦¬ì§€** ì—­í• ì„ í•´ì•¼ í•¨
- ì›Œì¹˜ â†’ í° â†’ iLens 2-hop êµ¬ì¡°
- ì¶”ê°€ ì§€ì—° ì‹œê°„: ~30-50ms

#### 1.6.8 ì œì•½ì‚¬í•­ ìš”ì•½í‘œ

| í•­ëª© | Virtual Run ìƒíƒœ | ì˜í–¥ | íšŒí”¼ ë°©ë²• |
|------|------------------|------|-----------|
| **BLE ì—­í• ** | Peripheral (ì„¼ì„œ) | Connect ì•±/ìŒì•… ë¶ˆê°€ | ì‚¬ì „ ì¢…ë£Œ |
| **í™œë™ íƒ€ì…** | ëŸ¬ë‹ ì „ìš© | ì‚¬ì´í´ë§ ë¶ˆê°€ | ë³„ë„ ëª¨ë“œ ëŒ€ê¸° |
| **ë°°í„°ë¦¬** | +15-25% ì†Œëª¨ | ìš´ë™ ì‹œê°„ ë‹¨ì¶• | ì„¤ì • ìµœì í™” |
| **ANT+ ì„¼ì„œ** | ì¼ë¶€ ë¹„í™œì„±í™” | HR Strap ë¬¸ì œ | ê´‘í•™ ì„¼ì„œ ì‚¬ìš© |
| **GPS** | ê¸°ë³¸ OFF | ê±°ë¦¬ ë¶€ì •í™• | Stryd ë˜ëŠ” GPS ON |
| **ë™ê¸°í™”** | ì„¸ì…˜ ì¤‘ ë¶ˆê°€ | ì‹¤ì‹œê°„ ì—…ë¡œë“œ X | ì¢…ë£Œ í›„ ìë™ |
| **ì—°ê²° ìˆ˜** | 1ê°œë§Œ | ë‹¤ì¤‘ ê¸°ê¸° ë¶ˆê°€ | í° ë¸Œë¦¬ì§€ êµ¬ì¡° |

#### 1.6.9 ì‹¤ì „ ê¶Œì¥ì‚¬í•­

**âœ… Virtual Runì— ìµœì ì¸ ìƒí™©**:
- íŠ¸ë ˆë“œë°€ ëŸ¬ë‹ (Zwift, iLens ì—°ë™)
- ë°ì´í„° ì •í™•ë„ê°€ ì¤‘ìš”í•œ í›ˆë ¨
- Stryd í’‹íŒŸ ë³´ìœ ì
- ì•Œë¦¼ì´ í•„ìš” ì—†ëŠ” ì‹œê°„ëŒ€

**âš ï¸ Virtual Runì„ í”¼í•´ì•¼ í•  ìƒí™©**:
- ì¥ê±°ë¦¬ ìš¸íŠ¸ë¼ ë§ˆë¼í†¤ (ë°°í„°ë¦¬)
- ì¤‘ìš”í•œ ì „í™”/ì•Œë¦¼ ëŒ€ê¸° ì¤‘
- ìŒì•… ìŠ¤íŠ¸ë¦¬ë°ì´ í•„ìˆ˜ì¸ ê²½ìš°
- ì‚¬ì´í´ë§/ë³µí•© ìš´ë™

**ğŸ’¡ ìµœì  ì„¤ì • ê°€ì´ë“œ**:
```
1. ìš´ë™ ì „:
   - Garmin Connect Mobile ì•± ì¢…ë£Œ
   - Stryd ì—°ê²° (ì˜µì…˜)
   - ë°°í„°ë¦¬ 80% ì´ìƒ í™•ì¸

2. Virtual Run ì‹œì‘:
   - START â†’ Virtual Run
   - "Ready to pair" í™•ì¸
   - iLens ì•± ì—°ê²°

3. ìš´ë™ ì¤‘:
   - ì›Œì¹˜ í™”ë©´ í™•ì¸ ìµœì†Œí™”
   - í•„ìš”ì‹œ START ëˆŒëŸ¬ ì„¸ì…˜ ê¸°ë¡

4. ìš´ë™ í›„:
   - STOP â†’ ì„¸ì…˜ ì €ì¥
   - Garmin Connect Mobile ì‹¤í–‰
   - ìë™ ë™ê¸°í™” ëŒ€ê¸°
```

---

## 2. iLens BLE í”„ë¡œí† ì½œ ë¶„ì„

### 2.1 ê¸°ë³¸ ì •ë³´

**í”„ë¡œí† ì½œ ë²„ì „**: v1.0.10  
**í†µì‹  ë°©ì‹**: BLE (Bluetooth Low Energy)  
**ì•„í‚¤í…ì²˜**: ìŠ¤ë§ˆíŠ¸í° ì¤‘ì‹¬ ì„¤ê³„

### 2.2 BLE ì„œë¹„ìŠ¤ êµ¬ì¡°

#### 2.2.1 Broadcast Service Data
```
Device Name: iLens-5883
Manufacturer Data: iLens-sw (ê²€ìƒ‰ í•„í„°ë§ìš©)
Tx Power: 0dBm
```

#### 2.2.2 ì£¼ìš” ì„œë¹„ìŠ¤ ë° íŠ¹ì„±

| ì„œë¹„ìŠ¤ | UUID | ì„¤ëª… |
|--------|------|------|
| Device Information | 0x180A | SN, íŒì›¨ì–´, í•˜ë“œì›¨ì–´ ë²„ì „ |
| Device Configuration | 58211C97-482A-2808-... | ì´ë¦„, ë°°í„°ë¦¬, ì‹œê°„, ë°ê¸° |
| Custom Services | 4b329cf2-3816-498c-... | ì•Œë¦¼, ë‚´ë¹„ê²Œì´ì…˜, ìš´ë™ ë°ì´í„° |

### 2.3 ìš´ë™ ë°ì´í„° í”„ë¡œí† ì½œ (ì„¹ì…˜ 4.3)

**ì„œë¹„ìŠ¤ UUID**: `c259c1bd-18d3-c348-b88d-5447aea1b615`

#### ì§€ì› ë©”íŠ¸ë¦­

| ID | ë©”íŠ¸ë¦­ | ë°ì´í„° íƒ€ì… | ë‹¨ìœ„ | ë¹„ê³  |
|----|--------|-------------|------|------|
| 0x00 | UI Sorting | 20 bytes | - | í‘œì‹œ ìˆœì„œ ì„¤ì • |
| 0x01 | Record Status | UINT32 | - | 0:ì‹œì‘, 1:ì¼ì‹œì •ì§€, 2:ì¢…ë£Œ |
| 0x02 | Heat Dissipation | UINT32 | kcal | ì¹¼ë¡œë¦¬ |
| 0x03 | Exercise Time | UINT32 | seconds | ìš´ë™ ì‹œê°„ |
| 0x04 | Total Time | UINT32 | seconds | ì´ ì‹œê°„ |
| 0x05 | Pause Time | UINT32 | seconds | ì¼ì‹œì •ì§€ ì‹œê°„ |
| 0x06 | Movement Distance | UINT32 | meters | ê±°ë¦¬ |
| 0x07 | Velocity | UINT32 | km/h | í˜„ì¬ ì†ë„ |
| 0x08 | Average Movement Speed | UINT32 | km/h | í‰ê·  ìš´ë™ ì†ë„ |
| 0x09 | Average Speed | UINT32 | km/h | í‰ê·  ì†ë„ |
| 0x0A | Maximum Speed | UINT32 | km/h | ìµœëŒ€ ì†ë„ |
| 0x0B | Real-time Heart Rate | UINT32 | bpm | ì‹¤ì‹œê°„ ì‹¬ë°•ìˆ˜ |
| 0x0C | Average Heart Rate | UINT32 | bpm | í‰ê·  ì‹¬ë°•ìˆ˜ |
| 0x0D | Maximum Heart Rate | UINT32 | bpm | ìµœëŒ€ ì‹¬ë°•ìˆ˜ |
| 0x0E | Current Cadence | UINT32 | rpm | í˜„ì¬ ì¼€ì´ë˜ìŠ¤ |
| 0x0F | Maximum Cadence | UINT32 | rpm | ìµœëŒ€ ì¼€ì´ë˜ìŠ¤ |
| 0x10 | Average Cadence | UINT32 | rpm | í‰ê·  ì¼€ì´ë˜ìŠ¤ |
| 0x11 | Current Power Rate | UINT32 | watts | í˜„ì¬ íŒŒì›Œ |
| 0x12 | Maximum Power Rate | UINT32 | watts | ìµœëŒ€ íŒŒì›Œ |
| 0x13 | Average Power Rate | UINT32 | watts | í‰ê·  íŒŒì›Œ |
| 0x14 | Current Orientation | UINT8 | - | ë°©í–¥ (0-7) |
| 0x15 | Current Road Name | UTF-8 | - | í˜„ì¬ ë„ë¡œëª… |

### 2.4 ë°ì´í„° ì „ì†¡ í˜•ì‹

```
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ID â”‚  DATA    â”‚ DESCRIPTION â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1B â”‚ 4B/var   â”‚ ë©”íŠ¸ë¦­ë³„    â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì˜ˆì‹œ - ì†ë„ ì „ì†¡**:
```
0x07 [4 bytes little-endian] // 15 km/h = 0x0F000000
```

---

## 3. Virtual Run + iLens í†µí•© ì•„í‚¤í…ì²˜

### 3.1 í•µì‹¬ ê°œë…: BLE ë¸Œë¦¬ì§€ êµ¬ì¡°

Virtual Runì˜ **1ê°œ ì—°ê²° ì œí•œ** ë•Œë¬¸ì—, ì›Œì¹˜ì—ì„œ iLensë¡œ ì§ì ‘ ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ëŒ€ì‹  **í° ì•±ì´ ë¸Œë¦¬ì§€(ì¤‘ê³„ì)** ì—­í• ì„ í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Garmin Forerunner 265        â”‚
â”‚     (Virtual Run Activity)       â”‚
â”‚                                  â”‚
â”‚  â€¢ Accelerometer â†’ Speed         â”‚
â”‚  â€¢ Optical HR â†’ Heart Rate       â”‚
â”‚  â€¢ Step Detection â†’ Cadence      â”‚
â”‚  â€¢ (Optional) Stryd â†’ Accurate   â”‚
â”‚                                  â”‚
â”‚  âš ï¸ BLE Peripheral ëª¨ë“œ          â”‚
â”‚     (1ê°œ ì—°ê²°ë§Œ í—ˆìš©)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ BLE Connection #1
         â”‚ Standard Profiles:
         â”‚ â€¢ RSC (0x1814)
         â”‚ â€¢ HR (0x180D)
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     iLens Bridge App             â”‚
â”‚     (Android - BLE Central)      â”‚
â”‚                                  â”‚
â”‚  [1] BLE Scanner                 â”‚
â”‚      â””â”€ Discover Forerunner      â”‚
â”‚                                  â”‚
â”‚  [2] RSC/HR Parser               â”‚
â”‚      â””â”€ Extract metrics          â”‚
â”‚                                  â”‚
â”‚  [3] Data Converter              â”‚
â”‚      â””â”€ iLens format transform   â”‚
â”‚                                  â”‚
â”‚  [4] BLE GATT Client             â”‚
â”‚      â””â”€ Connect to iLens         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ BLE Connection #2
         â”‚ Custom Protocol:
         â”‚ UUID: c259c1bd-18d3...
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     iLens Smart Glass            â”‚
â”‚     (AR Display)                 â”‚
â”‚                                  â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—      â”‚
â”‚  â•‘  15.2 km/h â”‚ 152 bpm  â•‘      â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚  â•‘     5.23 km           â•‘      â”‚
â”‚  â•‘     25:43             â•‘      â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì™œ í° ë¸Œë¦¬ì§€ê°€ í•„ìš”í•œê°€?**

1. **Virtual Run ì œì•½**: BLE Peripheral ëª¨ë“œì—ì„œ 1ê°œ Centralë§Œ ì—°ê²° ê°€ëŠ¥
2. **iLens ìš”êµ¬ì‚¬í•­**: iLensëŠ” GATT Clientë¡œ ì—°ê²° í•„ìš” (ë‹¤ë¥¸ ì—°ê²°)
3. **í•´ê²°ì±…**: í°ì´ Forerunnerì˜ Centralì´ ë˜ê³ , ë™ì‹œì— iLensì˜ GATT Clientê°€ ë¨

**ì¥ì **:
- âœ… ì›Œì¹˜ ì œì•½ì„ ìš°íšŒ
- âœ… ë°ì´í„° ë³€í™˜ ë° ê²€ì¦ ê°€ëŠ¥
- âœ… ì¶”ê°€ ê¸°ëŠ¥ êµ¬í˜„ ê°€ëŠ¥ (ê¸°ë¡, ì•Œë¦¼ ë“±)
- âœ… ë°°í„°ë¦¬ ì˜í–¥ ìµœì†Œí™” (í°ì´ ì²˜ë¦¬)

**ì¶”ê°€ ì§€ì—° ì‹œê°„**:
- BLE hop: ~20-30ms
- ë°ì´í„° ë³€í™˜: ~10-20ms
- **ì´ ì¶”ê°€ ì§€ì—°**: ~30-50ms
- **ìµœì¢… E2E ì§€ì—°**: 80-150ms (ì—¬ì „íˆ ë§¤ìš° ë¹ ë¦„)

### 3.2 ì•„í‚¤í…ì²˜ ë¹„êµ

| í•­ëª© | Connect IQ ë°©ì‹ | Virtual Run ë°©ì‹ |
|------|-----------------|------------------|
| **ì¤‘ê°œ ì•±** | Garmin Connect Mobile | âŒ ë¶ˆí•„ìš” |
| **êµ¬ì„± ë³µì¡ë„** | 3-tier | âœ… 2-tier |
| **ì§€ì—° ì‹œê°„** | 200-500ms | âœ… 50-100ms |
| **ì—°ê²° ì•ˆì •ì„±** | ì¤‘ê°„ (2ê°œ BLE ì—°ê²°) | âœ… ë†’ìŒ (1ê°œ ì—°ê²°) |
| **ê°œë°œ ë‚œì´ë„** | ë†’ìŒ (2ê°œ SDK) | âœ… ì¤‘ê°„ (BLEë§Œ) |
| **ë°°í„°ë¦¬ ì†Œëª¨** | ë†’ìŒ | âœ… ë‚®ìŒ |
| **í‘œì¤€ ì¤€ìˆ˜** | ë…ì í”„ë¡œí† ì½œ | âœ… í‘œì¤€ BLE |

### 3.3 ë°ì´í„° íë¦„ ìƒì„¸

#### Step 1: Virtual Run í™œì„±í™”
```
ì‚¬ìš©ì: Forerunnerì—ì„œ START â†’ Virtual Run ì„ íƒ
ì›Œì¹˜: "Ready to pair" ìƒíƒœë¡œ ì „í™˜
ì›Œì¹˜: BLE advertising ì‹œì‘
```

#### Step 2: iLens ì•±ì´ ì›Œì¹˜ ë°œê²¬
```kotlin
// BLE Scanner
bleScanner.startScan(
    filters = listOf(
        ScanFilter.Builder()
            .setServiceUuid(ParcelUuid(UUID_RSC_SERVICE))
            .build()
    ),
    settings = ScanSettings.Builder()
        .setScanMode(ScanSettings.SCAN_MODE_LOW_LATENCY)
        .build(),
    callback = scanCallback
)
```

#### Step 3: RSC/HR ë°ì´í„° êµ¬ë…
```kotlin
// RSC Characteristic UUID: 0x2A53
gatt.setCharacteristicNotification(rscCharacteristic, true)

// HR Characteristic UUID: 0x2A37
gatt.setCharacteristicNotification(hrCharacteristic, true)
```

#### Step 4: ë°ì´í„° íŒŒì‹± ë° ë³€í™˜
```kotlin
// RSC Data Format (í‘œì¤€ BLE)
// [Flags:1][Speed:2][Cadence:1][StrideLength:2][Distance:4]

fun parseRscData(data: ByteArray): RunningData {
    val flags = data[0].toInt()
    val instantaneousSpeed = data.getShort(1) // cm/s
    val instantaneousCadence = data[3].toInt() // spm
    
    return RunningData(
        speedKmh = instantaneousSpeed / 27.778f, // cm/s to km/h
        cadenceSpm = instantaneousCadence
    )
}

// HR Data Format
// [Flags:1][HR:1 or 2]

fun parseHrData(data: ByteArray): Int {
    val flags = data[0].toInt()
    val hrFormat = flags and 0x01
    
    return if (hrFormat == 0) {
        data[1].toInt() // 8-bit
    } else {
        data.getShort(1).toInt() // 16-bit
    }
}
```

#### Step 5: iLens í¬ë§· ë³€í™˜ ë° ì „ì†¡
```kotlin
fun sendToiLens(runningData: RunningData, heartRate: Int) {
    // ì†ë„ ì „ì†¡
    val speedPacket = createMetric(0x07, runningData.speedKmh.toInt())
    iLensBle.write(EXERCISE_UUID, speedPacket)
    
    // ì¼€ì´ë˜ìŠ¤ ì „ì†¡
    val cadencePacket = createMetric(0x0E, runningData.cadenceSpm)
    iLensBle.write(EXERCISE_UUID, cadencePacket)
    
    // ì‹¬ë°•ìˆ˜ ì „ì†¡
    val hrPacket = createMetric(0x0B, heartRate)
    iLensBle.write(EXERCISE_UUID, hrPacket)
}

fun createMetric(id: Int, value: Int): ByteArray {
    return ByteBuffer.allocate(5)
        .order(ByteOrder.LITTLE_ENDIAN)
        .put(id.toByte())
        .putInt(value)
        .array()
}
```

### 3.4 ì •í™•ë„ í–¥ìƒ: Stryd í’‹íŒŸ ì‚¬ìš©

Virtual Runì€ ì›Œì¹˜ì— ì—°ê²°ëœ ANT+ ì„¼ì„œì˜ ë°ì´í„°ë¥¼ BLEë¡œ ì¬ì „ì†¡í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stryd Footpod â”‚ (ê°€ì¥ ì •í™•í•œ ëŸ¬ë‹ íŒŒì›Œ ë¯¸í„°)
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ ANT+
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Forerunner Watch    â”‚
â”‚ (Virtual Run)       â”‚
â”‚                     â”‚
â”‚ Stryd ë°ì´í„° ìˆ˜ì‹ :  â”‚
â”‚ â€¢ ì •í™•í•œ ì†ë„       â”‚
â”‚ â€¢ ê±°ë¦¬              â”‚
â”‚ â€¢ íŒŒì›Œ              â”‚
â”‚ â€¢ í¼ ë©”íŠ¸ë¦­         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ BLE
       â”‚ (Stryd ë°ì´í„°ë¥¼ ì¬ì „ì†¡)
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ iLens Bridge App  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì •í™•ë„ ë¹„êµ**:
- ì†ëª© ê¸°ë°˜ ì†ë„: Â±5-10% ì˜¤ì°¨
- Stryd í’‹íŒŸ: Â±1-2% ì˜¤ì°¨ (íŠ¸ë™ í…ŒìŠ¤íŠ¸ ê¸°ì¤€)

---

## 4. ê°œë°œ ê°€ì´ë“œ: iLens Bridge App

### 4.1 ê°œë°œ ê°œìš”

| í•­ëª© | ë‚´ìš© |
|------|------|
| **í”Œë«í¼** | Android (API 31+) |
| **ì–¸ì–´** | Kotlin |
| **í•„ìˆ˜ ê¶Œí•œ** | BLUETOOTH_SCAN, BLUETOOTH_CONNECT, BLUETOOTH_ADVERTISE |
| **ì£¼ìš” ë¼ì´ë¸ŒëŸ¬ë¦¬** | Android BLE API, Coroutines, Flow |
| **ê°œë°œ ê¸°ê°„** | 2-3ì£¼ (MVP) |
| **ë‚œì´ë„** | â­â­â­ (ì¤‘ê°„) |

### 4.2 ì•± ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          iLens Bridge App               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     UI Layer (Jetpack Compose)   â”‚  â”‚
â”‚  â”‚  â€¢ ì—°ê²° ìƒíƒœ                      â”‚  â”‚
â”‚  â”‚  â€¢ ì‹¤ì‹œê°„ ë°ì´í„° í‘œì‹œ             â”‚  â”‚
â”‚  â”‚  â€¢ ì„¤ì •                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     ViewModel Layer              â”‚  â”‚
â”‚  â”‚  â€¢ ìƒíƒœ ê´€ë¦¬                      â”‚  â”‚
â”‚  â”‚  â€¢ UI ì´ë²¤íŠ¸ ì²˜ë¦¬                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     Domain Layer                 â”‚  â”‚
â”‚  â”‚  â€¢ RunningDataProcessor          â”‚  â”‚
â”‚  â”‚  â€¢ MetricConverter                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     Data Layer                   â”‚  â”‚
â”‚  â”‚                                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  Garmin   â”‚  â”‚   iLens    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  BLE Repo â”‚  â”‚  BLE Repo  â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3 í•µì‹¬ ì»´í¬ë„ŒíŠ¸

#### 4.3.1 GarminBleRepository

```kotlin
class GarminBleRepository(
    private val context: Context
) {
    companion object {
        val UUID_RSC_SERVICE = UUID.fromString("00001814-0000-1000-8000-00805f9b34fb")
        val UUID_RSC_MEASUREMENT = UUID.fromString("00002a53-0000-1000-8000-00805f9b34fb")
        val UUID_HR_SERVICE = UUID.fromString("0000180d-0000-1000-8000-00805f9b34fb")
        val UUID_HR_MEASUREMENT = UUID.fromString("00002a37-0000-1000-8000-00805f9b34fb")
    }
    
    private val bluetoothManager = 
        context.getSystemService(Context.BLUETOOTH_SERVICE) as BluetoothManager
    private val bluetoothAdapter = bluetoothManager.adapter
    
    private var gatt: BluetoothGatt? = null
    
    // Flow for real-time running data
    private val _runningData = MutableStateFlow<RunningData?>(null)
    val runningData: StateFlow<RunningData?> = _runningData.asStateFlow()
    
    fun scanForGarminWatch(callback: (BluetoothDevice) -> Unit) {
        val scanner = bluetoothAdapter.bluetoothLeScanner
        
        val scanFilter = ScanFilter.Builder()
            .setServiceUuid(ParcelUuid(UUID_RSC_SERVICE))
            .build()
        
        val scanSettings = ScanSettings.Builder()
            .setScanMode(ScanSettings.SCAN_MODE_LOW_LATENCY)
            .build()
        
        val scanCallback = object : ScanCallback() {
            override fun onScanResult(callbackType: Int, result: ScanResult) {
                callback(result.device)
            }
        }
        
        scanner.startScan(listOf(scanFilter), scanSettings, scanCallback)
    }
    
    fun connectToWatch(device: BluetoothDevice) {
        gatt = device.connectGatt(context, false, gattCallback)
    }
    
    private val gattCallback = object : BluetoothGattCallback() {
        override fun onConnectionStateChange(gatt: BluetoothGatt, status: Int, newState: Int) {
            when (newState) {
                BluetoothProfile.STATE_CONNECTED -> {
                    gatt.discoverServices()
                }
            }
        }
        
        override fun onServicesDiscovered(gatt: BluetoothGatt, status: Int) {
            if (status == BluetoothGatt.GATT_SUCCESS) {
                enableNotifications(gatt)
            }
        }
        
        override fun onCharacteristicChanged(
            gatt: BluetoothGatt,
            characteristic: BluetoothGattCharacteristic,
            value: ByteArray
        ) {
            when (characteristic.uuid) {
                UUID_RSC_MEASUREMENT -> {
                    val rscData = parseRscMeasurement(value)
                    _runningData.value = rscData
                }
                UUID_HR_MEASUREMENT -> {
                    val hr = parseHeartRate(value)
                    _runningData.value = _runningData.value?.copy(heartRate = hr)
                }
            }
        }
    }
    
    private fun enableNotifications(gatt: BluetoothGatt) {
        // RSC
        val rscService = gatt.getService(UUID_RSC_SERVICE)
        val rscChar = rscService?.getCharacteristic(UUID_RSC_MEASUREMENT)
        rscChar?.let {
            gatt.setCharacteristicNotification(it, true)
            val descriptor = it.getDescriptor(
                UUID.fromString("00002902-0000-1000-8000-00805f9b34fb")
            )
            descriptor.value = BluetoothGattDescriptor.ENABLE_NOTIFICATION_VALUE
            gatt.writeDescriptor(descriptor)
        }
        
        // HR
        val hrService = gatt.getService(UUID_HR_SERVICE)
        val hrChar = hrService?.getCharacteristic(UUID_HR_MEASUREMENT)
        hrChar?.let {
            gatt.setCharacteristicNotification(it, true)
            val descriptor = it.getDescriptor(
                UUID.fromString("00002902-0000-1000-8000-00805f9b34fb")
            )
            descriptor.value = BluetoothGattDescriptor.ENABLE_NOTIFICATION_VALUE
            gatt.writeDescriptor(descriptor)
        }
    }
    
    private fun parseRscMeasurement(data: ByteArray): RunningData {
        val flags = data[0].toInt()
        
        // Speed in m/s (0.00390625 resolution)
        val speedRaw = ((data[2].toInt() and 0xFF) shl 8) or 
                       (data[1].toInt() and 0xFF)
        val speedMs = speedRaw * 0.00390625
        val speedKmh = speedMs * 3.6
        
        // Cadence in steps/min
        val cadence = data[3].toInt() and 0xFF
        
        return RunningData(
            speedKmh = speedKmh.toFloat(),
            cadenceSpm = cadence,
            heartRate = 0
        )
    }
    
    private fun parseHeartRate(data: ByteArray): Int {
        val flags = data[0].toInt()
        val hrFormat = flags and 0x01
        
        return if (hrFormat == 0) {
            data[1].toInt() and 0xFF
        } else {
            ((data[2].toInt() and 0xFF) shl 8) or (data[1].toInt() and 0xFF)
        }
    }
}

data class RunningData(
    val speedKmh: Float,
    val cadenceSpm: Int,
    val heartRate: Int
)
```

#### 4.3.2 ILensBleRepository

```kotlin
class ILensBleRepository(private val context: Context) {
    companion object {
        val UUID_EXERCISE_SERVICE = 
            UUID.fromString("4b329cf2-3816-498c-8453-ee8798502a08")
        val UUID_EXERCISE_DATA = 
            UUID.fromString("c259c1bd-18d3-c348-b88d-5447aea1b615")
    }
    
    private var gatt: BluetoothGatt? = null
    
    fun connectToiLens(macAddress: String) {
        val bluetoothManager = 
            context.getSystemService(Context.BLUETOOTH_SERVICE) as BluetoothManager
        val device = bluetoothManager.adapter.getRemoteDevice(macAddress)
        
        gatt = device.connectGatt(context, false, object : BluetoothGattCallback() {
            override fun onConnectionStateChange(
                gatt: BluetoothGatt,
                status: Int,
                newState: Int
            ) {
                if (newState == BluetoothProfile.STATE_CONNECTED) {
                    gatt.discoverServices()
                }
            }
            
            override fun onServicesDiscovered(gatt: BluetoothGatt, status: Int) {
                if (status == BluetoothGatt.GATT_SUCCESS) {
                    configureUILayout()
                }
            }
        })
    }
    
    private fun configureUILayout() {
        // UI Sorting: ì†ë„, ê±°ë¦¬, ì‹¬ë°•ìˆ˜, ì‹œê°„, ì¼€ì´ë˜ìŠ¤
        val layout = byteArrayOf(
            0x00,  // UI Sorting ID
            0x07,  // Speed
            0x06,  // Distance
            0x0B,  // Heart Rate
            0x03,  // Time
            0x0E,  // Cadence
            0x00, 0x00, 0x00, 0x00, 0x00,
            0x00, 0x00, 0x00, 0x00, 0x00,
            0x00, 0x00, 0x00, 0x00, 0x00
        )
        
        writeCharacteristic(layout)
    }
    
    fun sendSpeed(speedKmh: Int) {
        val packet = createMetricPacket(0x07, speedKmh)
        writeCharacteristic(packet)
    }
    
    fun sendCadence(spm: Int) {
        val packet = createMetricPacket(0x0E, spm)
        writeCharacteristic(packet)
    }
    
    fun sendHeartRate(bpm: Int) {
        val packet = createMetricPacket(0x0B, bpm)
        writeCharacteristic(packet)
    }
    
    fun sendDistance(meters: Int) {
        val packet = createMetricPacket(0x06, meters)
        writeCharacteristic(packet)
    }
    
    fun sendTime(seconds: Int) {
        val packet = createMetricPacket(0x03, seconds)
        writeCharacteristic(packet)
    }
    
    private fun createMetricPacket(id: Int, value: Int): ByteArray {
        return ByteBuffer.allocate(5)
            .order(ByteOrder.LITTLE_ENDIAN)
            .put(id.toByte())
            .putInt(value)
            .array()
    }
    
    private fun writeCharacteristic(data: ByteArray) {
        val service = gatt?.getService(UUID_EXERCISE_SERVICE)
        val characteristic = service?.getCharacteristic(UUID_EXERCISE_DATA)
        
        characteristic?.let {
            it.value = data
            gatt?.writeCharacteristic(it)
        }
    }
}
```

### 4.4 í†µí•© ë¡œì§

```kotlin
class ForerunnerToiLensBridge(
    private val garminRepo: GarminBleRepository,
    private val iLensRepo: ILensBleRepository
) {
    private var startTime: Long = 0
    private var totalDistance: Int = 0
    
    fun start() {
        startTime = System.currentTimeMillis()
        
        // Garmin ë°ì´í„° êµ¬ë…
        viewModelScope.launch {
            garminRepo.runningData.collect { data ->
                data?.let { processRunningData(it) }
            }
        }
    }
    
    private fun processRunningData(data: RunningData) {
        // 1. ì‹¤ì‹œê°„ ë©”íŠ¸ë¦­ ì „ì†¡
        iLensRepo.sendSpeed(data.speedKmh.toInt())
        iLensRepo.sendCadence(data.cadenceSpm)
        iLensRepo.sendHeartRate(data.heartRate)
        
        // 2. ëˆ„ì  ë°ì´í„° ê³„ì‚° ë° ì „ì†¡
        val elapsedSeconds = ((System.currentTimeMillis() - startTime) / 1000).toInt()
        iLensRepo.sendTime(elapsedSeconds)
        
        // ê±°ë¦¬ ê³„ì‚° (ì†ë„ * ì‹œê°„)
        totalDistance += (data.speedKmh / 3.6).toInt() // 1ì´ˆ ë™ì•ˆì˜ ì´ë™ê±°ë¦¬
        iLensRepo.sendDistance(totalDistance)
    }
}
```

### 4.5 ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤

```kotlin
@Composable
fun MainScreen(viewModel: MainViewModel) {
    val uiState by viewModel.uiState.collectAsState()
    
    Column(
        modifier = Modifier.fillMaxSize().padding(16.dp),
        verticalArrangement = Arrangement.spacedBy(16.dp)
    ) {
        // Garmin ì›Œì¹˜ ì—°ê²° ìƒíƒœ
        ConnectionCard(
            title = "Garmin Forerunner",
            isConnected = uiState.garminConnected,
            onConnect = { viewModel.connectGarmin() }
        )
        
        // iLens ê¸€ë˜ìŠ¤ ì—°ê²° ìƒíƒœ
        ConnectionCard(
            title = "iLens Glass",
            isConnected = uiState.ilensConnected,
            onConnect = { viewModel.connectiLens() }
        )
        
        // ì‹¤ì‹œê°„ ë°ì´í„° í‘œì‹œ
        if (uiState.garminConnected && uiState.ilensConnected) {
            RunningMetricsDisplay(
                speed = uiState.runningData?.speedKmh ?: 0f,
                cadence = uiState.runningData?.cadenceSpm ?: 0,
                heartRate = uiState.runningData?.heartRate ?: 0,
                distance = uiState.totalDistance,
                time = uiState.elapsedTime
            )
        }
    }
}

@Composable
fun RunningMetricsDisplay(
    speed: Float,
    cadence: Int,
    heartRate: Int,
    distance: Int,
    time: Int
) {
    Card {
        Column(padding = 16.dp) {
            MetricRow("ì†ë„", "${speed.format(1)} km/h")
            MetricRow("ì¼€ì´ë˜ìŠ¤", "$cadence spm")
            MetricRow("ì‹¬ë°•ìˆ˜", "$heartRate bpm")
            MetricRow("ê±°ë¦¬", "${(distance / 1000f).format(2)} km")
            MetricRow("ì‹œê°„", formatTime(time))
        }
    }
}
```

### 4.6 ë°°í„°ë¦¬ ìµœì í™”

```kotlin
class BatteryOptimizedDataSender {
    private val batchInterval = 1000L // 1ì´ˆë§ˆë‹¤ ì „ì†¡
    private val dataQueue = mutableListOf<ByteArray>()
    
    fun queueData(packet: ByteArray) {
        dataQueue.add(packet)
    }
    
    fun startBatchSending(iLensRepo: ILensBleRepository) {
        viewModelScope.launch {
            while (isActive) {
                delay(batchInterval)
                
                if (dataQueue.isNotEmpty()) {
                    // ë§ˆì§€ë§‰ ê°’ë§Œ ì „ì†¡ (ìµœì‹  ìƒíƒœ)
                    val latestData = dataQueue.takeLast(3) // ì†ë„, ì¼€ì´ë˜ìŠ¤, ì‹¬ë°•ìˆ˜
                    latestData.forEach { iLensRepo.writeData(it) }
                    dataQueue.clear()
                }
            }
        }
    }
}
```

---

## 5. ê°œë°œ ë¡œë“œë§µ ë° ë‚œì´ë„

### 2.1 ê¸°ë³¸ ì •ë³´

**í”„ë¡œí† ì½œ ë²„ì „**: v1.0.10  
**í†µì‹  ë°©ì‹**: BLE (Bluetooth Low Energy)  
**ì•„í‚¤í…ì²˜**: ìŠ¤ë§ˆíŠ¸í° ì¤‘ì‹¬ ì„¤ê³„

### 2.2 BLE ì„œë¹„ìŠ¤ êµ¬ì¡°

#### 2.2.1 Broadcast Service Data
```
Device Name: iLens-5883
Manufacturer Data: iLens-sw (ê²€ìƒ‰ í•„í„°ë§ìš©)
Tx Power: 0dBm
```

#### 2.2.2 ì£¼ìš” ì„œë¹„ìŠ¤ ë° íŠ¹ì„±

| ì„œë¹„ìŠ¤ | UUID | ì„¤ëª… |
|--------|------|------|
| Device Information | 0x180A | SN, íŒì›¨ì–´, í•˜ë“œì›¨ì–´ ë²„ì „ |
| Device Configuration | 58211C97-482A-2808-... | ì´ë¦„, ë°°í„°ë¦¬, ì‹œê°„, ë°ê¸° |
| Custom Services | 4b329cf2-3816-498c-... | ì•Œë¦¼, ë‚´ë¹„ê²Œì´ì…˜, ìš´ë™ ë°ì´í„° |

### 2.3 ìš´ë™ ë°ì´í„° í”„ë¡œí† ì½œ (ì„¹ì…˜ 4.3)

**ì„œë¹„ìŠ¤ UUID**: `c259c1bd-18d3-c348-b88d-5447aea1b615`

#### ì§€ì› ë©”íŠ¸ë¦­

| ID | ë©”íŠ¸ë¦­ | ë°ì´í„° íƒ€ì… | ë‹¨ìœ„ | ë¹„ê³  |
|----|--------|-------------|------|------|
| 0x00 | UI Sorting | 20 bytes | - | í‘œì‹œ ìˆœì„œ ì„¤ì • |
| 0x01 | Record Status | UINT32 | - | 0:ì‹œì‘, 1:ì¼ì‹œì •ì§€, 2:ì¢…ë£Œ |
| 0x02 | Heat Dissipation | UINT32 | kcal | ì¹¼ë¡œë¦¬ |
| 0x03 | Exercise Time | UINT32 | seconds | ìš´ë™ ì‹œê°„ |
| 0x04 | Total Time | UINT32 | seconds | ì´ ì‹œê°„ |
| 0x05 | Pause Time | UINT32 | seconds | ì¼ì‹œì •ì§€ ì‹œê°„ |
| 0x06 | Movement Distance | UINT32 | meters | ê±°ë¦¬ |
| 0x07 | Velocity | UINT32 | km/h | í˜„ì¬ ì†ë„ |
| 0x08 | Average Movement Speed | UINT32 | km/h | í‰ê·  ìš´ë™ ì†ë„ |
| 0x09 | Average Speed | UINT32 | km/h | í‰ê·  ì†ë„ |
| 0x0A | Maximum Speed | UINT32 | km/h | ìµœëŒ€ ì†ë„ |
| 0x0B | Real-time Heart Rate | UINT32 | bpm | ì‹¤ì‹œê°„ ì‹¬ë°•ìˆ˜ |
| 0x0C | Average Heart Rate | UINT32 | bpm | í‰ê·  ì‹¬ë°•ìˆ˜ |
| 0x0D | Maximum Heart Rate | UINT32 | bpm | ìµœëŒ€ ì‹¬ë°•ìˆ˜ |
| 0x0E | Current Cadence | UINT32 | rpm | í˜„ì¬ ì¼€ì´ë˜ìŠ¤ |
| 0x0F | Maximum Cadence | UINT32 | rpm | ìµœëŒ€ ì¼€ì´ë˜ìŠ¤ |
| 0x10 | Average Cadence | UINT32 | rpm | í‰ê·  ì¼€ì´ë˜ìŠ¤ |
| 0x11 | Current Power Rate | UINT32 | watts | í˜„ì¬ íŒŒì›Œ |
| 0x12 | Maximum Power Rate | UINT32 | watts | ìµœëŒ€ íŒŒì›Œ |
| 0x13 | Average Power Rate | UINT32 | watts | í‰ê·  íŒŒì›Œ |
| 0x14 | Current Orientation | UINT8 | - | ë°©í–¥ (0-7) |
| 0x15 | Current Road Name | UTF-8 | - | í˜„ì¬ ë„ë¡œëª… |

### 2.4 ë°ì´í„° ì „ì†¡ í˜•ì‹

```
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ID â”‚  DATA    â”‚ DESCRIPTION â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1B â”‚ 4B/var   â”‚ ë©”íŠ¸ë¦­ë³„    â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì˜ˆì‹œ - ì†ë„ ì „ì†¡**:
```
0x07 [4 bytes little-endian] // 15 km/h = 0x0F000000
```

### 2.5 ê¸°íƒ€ ê¸°ëŠ¥

#### ì•Œë¦¼ ì‹œìŠ¤í…œ (ì„¹ì…˜ 4.1)
- WeChat, QQ, ì „í™”, SMS ì•Œë¦¼
- GBK ì¸ì½”ë”© ì§€ì›
- ì‹œê°„ í˜•ì‹: `20210422T175301`

#### ë‚´ë¹„ê²Œì´ì…˜ (ì„¹ì…˜ 4.2)
- 4ì¤„ ì •ë³´ í‘œì‹œ
- í„´ë°”ì´í„´ ì•ˆë‚´
- ë‚¨ì€ ê±°ë¦¬/ì‹œê°„ í‘œì‹œ

#### AI ì±—ë´‡ (ì„¹ì…˜ 4.8)
- ìŒì„± ì…ë ¥ (Bluetooth Classic SPP)
- í…ìŠ¤íŠ¸ ëŒ€í™”
- ì±—ë´‡ ì‘ë‹µ í‘œì‹œ

---

## 3. ì§ì ‘ ì—°ê²° ë¶ˆê°€ëŠ¥ì„± ë¶„ì„

### 3.1 êµ¬ì¡°ì  ì œì•½

#### Garmin ì¸¡ ì œì•½
1. **Connect IQ ì œí•œ**: ì§ì ‘ BLE peripheral ì—°ê²° ë¶ˆê°€
2. **API ì œì•½**: `Comm` ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” Garmin Connect Mobile ê²½ìœ ë§Œ ì§€ì›
3. **ë³´ì•ˆ ì •ì±…**: ì™¸ë¶€ ê¸°ê¸°ì™€ì˜ ì§ì ‘ í†µì‹  ì°¨ë‹¨

#### iLens ì¸¡ ì œì•½
1. **ì»¤ìŠ¤í…€ í”„ë¡œí† ì½œ**: í‘œì¤€ BLE í”„ë¡œí•„ ë¯¸ì‚¬ìš©
2. **ìŠ¤ë§ˆíŠ¸í° ì¤‘ì‹¬**: ëª¨ë“  ë°ì´í„°ëŠ” ì•±ì—ì„œ ì œê³µ
3. **GATT êµ¬ì¡°**: íŠ¹ì • UUIDì™€ ë°ì´í„° í˜•ì‹ ìš”êµ¬

### 3.2 í”„ë¡œí† ì½œ ë¶ˆì¼ì¹˜

| í•­ëª© | Garmin | iLens | í˜¸í™˜ì„± |
|------|--------|-------|--------|
| í†µì‹  ë°©ì‹ | Comm API | BLE GATT | âŒ ë¶ˆì¼ì¹˜ |
| ë°ì´í„° í˜•ì‹ | JSON/ë°”ì´ë„ˆë¦¬ | ì»¤ìŠ¤í…€ ë°”ì´ë„ˆë¦¬ | âŒ ë³€í™˜ í•„ìš” |
| ì¤‘ê°œì | Garmin Connect | ë¶ˆí•„ìš” | âŒ êµ¬ì¡° ìƒì´ |
| ì¸ì½”ë”© | UTF-8 | GBK/UTF-8 í˜¼ìš© | â–³ ë¶€ë¶„ í˜¸í™˜ |

### 3.3 ê²°ë¡ 

**Garmin ì›Œì¹˜ì™€ iLensì˜ ì§ì ‘ ì—°ê²°ì€ ê¸°ìˆ ì ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.**

ë‘ ê¸°ê¸° ëª¨ë‘ ìŠ¤ë§ˆíŠ¸í°ì„ ì¤‘ì‹¬ìœ¼ë¡œ í•œ ìƒíƒœê³„ì´ë©°, ì§ì ‘ í†µì‹ ì„ ìœ„í•œ ì¸í„°í˜ì´ìŠ¤ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

---

## 4. Forerunner + iLens í†µí•© ì‹œë‚˜ë¦¬ì˜¤

### 4.1 ì œì•ˆ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Garmin Forerunner   â”‚
â”‚  (Virtual Run)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ BLE/ANT+
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Garmin Connect       â”‚
â”‚ Mobile App           â”‚
â”‚ (ìë™ ë™ê¸°í™”)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ Mobile SDK
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  iLens Bridge App    â”‚
â”‚  (ìƒˆë¡œ ê°œë°œ í•„ìš”)    â”‚
â”‚                      â”‚
â”‚  - SDK í†µí•©          â”‚
â”‚  - ë°ì´í„° ë³€í™˜       â”‚
â”‚  - BLE í´ë¼ì´ì–¸íŠ¸    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚ BLE GATT Write
           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  iLens Smart Glass   â”‚
â”‚  (AR Display)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ë°ì´í„° ë§¤í•‘

#### ëŸ¬ë‹ ì¤‘ í•„ìˆ˜ ë©”íŠ¸ë¦­

| Forerunner ë°ì´í„° | iLens ë©”íŠ¸ë¦­ ID | í‘œì‹œ í˜•ì‹ |
|-------------------|-----------------|-----------|
| í˜„ì¬ ì†ë„ | 0x07 | "15.2 km/h" |
| í‰ê·  ì†ë„ | 0x09 | "14.8 km/h" |
| ê±°ë¦¬ | 0x06 | "5,230 m" |
| ì‹œê°„ | 0x03 | "25:43" |
| ì‹¬ë°•ìˆ˜ | 0x0B | "152 bpm" |
| í‰ê·  ì‹¬ë°•ìˆ˜ | 0x0C | "148 bpm" |
| ì¼€ì´ë˜ìŠ¤ | 0x0E | "176 spm" |
| ì¹¼ë¡œë¦¬ | 0x02 | "432 kcal" |

#### UI Sorting ì„¤ì • ì˜ˆì‹œ

```
0x00 [20 bytes]:
[0x07, 0x06, 0x0B, 0x03, 0x02, 0x0E, 0x09, 0x0C, 0x00, 0x00, ...]
 ì†ë„  ê±°ë¦¬  ì‹¬ë°•  ì‹œê°„  ì¹¼ë¡œë¦¬ ì¼€ì´ë˜ìŠ¤ í‰ê· ì†ë„ í‰ê· ì‹¬ë°•
```

### 4.3 ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë¡œì§

```python
# ì˜ì‚¬ì½”ë“œ
class ForerunnerToiLensAdapter:
    def on_workout_data_update(self, garmin_data):
        # 1. Garmin Mobile SDKì—ì„œ ë°ì´í„° ìˆ˜ì‹ 
        speed = garmin_data.get_speed()
        distance = garmin_data.get_distance()
        heart_rate = garmin_data.get_heart_rate()
        
        # 2. iLens í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        ilens_packets = [
            self.create_packet(0x07, speed),      # km/h
            self.create_packet(0x06, distance),   # meters
            self.create_packet(0x0B, heart_rate)  # bpm
        ]
        
        # 3. BLEë¡œ ì „ì†¡
        for packet in ilens_packets:
            self.ble_client.write(EXERCISE_DATA_UUID, packet)
    
    def create_packet(self, metric_id, value):
        # ID(1) + UINT32(4) little-endian
        return bytes([metric_id]) + value.to_bytes(4, 'little')
```

### 4.4 ì¶”ê°€ ê¸°ëŠ¥ í†µí•©

#### ë‚´ë¹„ê²Œì´ì…˜ í†µí•©
```
Forerunner ì½”ìŠ¤ ì•ˆë‚´ â†’ iLens Navigation (UUID: 0d240db6-...)

"500m í›„ ì¢ŒíšŒì „"
"í˜„ì¬ ì†ë„: 15 km/h"
"ë‚¨ì€ ê±°ë¦¬: 3.2 km"
```

#### ì•Œë¦¼ í†µí•©
```
Garmin Connect Mobile ì•Œë¦¼ â†’ iLens Information Tips (UUID: 0eb521eb-...)

ì „í™”, ë¬¸ì, ì•± ì•Œë¦¼ì„ AR ê¸€ë˜ìŠ¤ì— í‘œì‹œ
```

### 4.5 ì•ˆì •ì„± í‰ê°€

#### âœ… ì¥ì 

1. **ì™„ë²½í•œ ë©”íŠ¸ë¦­ ì§€ì›**: iLensëŠ” ëŸ¬ë‹ì— í•„ìš”í•œ ëª¨ë“  ë°ì´í„°ë¥¼ ì§€ì›
2. **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸**: BLE WRITEë¡œ ì¦‰ê° ë°˜ì˜
3. **ê²€ì¦ëœ ìƒíƒœê³„**: ì–‘ìª½ ëª¨ë‘ ì„±ìˆ™í•œ í”Œë«í¼
4. **ë°°í„°ë¦¬ íš¨ìœ¨**: BLE ì €ì „ë ¥ íŠ¹ì„±

#### âš ï¸ ê³ ë ¤ì‚¬í•­

1. **ì¤‘ê°œ ì•± ê°œë°œ í•„ìš”**: Garmin Mobile SDK + iLens BLE í†µí•©
2. **ì§€ì—° ì‹œê°„**: 3-tier êµ¬ì¡°ë¡œ ì¸í•œ ì•½ê°„ì˜ ë ˆì´í„´ì‹œ (ì˜ˆìƒ 100-300ms)
3. **ì—°ê²° ì•ˆì •ì„±**: ë‘ ê°œì˜ BLE ì—°ê²° ìœ ì§€ í•„ìš”
4. **ë°°í„°ë¦¬ ì†Œëª¨**: ìŠ¤ë§ˆíŠ¸í°ì´ ì¤‘ê°œ ì—­í• ë¡œ ì¸í•œ ì¶”ê°€ ì†Œëª¨

### 4.6 êµ¬í˜„ ìš°ì„ ìˆœìœ„

#### Phase 1: ê¸°ë³¸ ìš´ë™ ë°ì´í„° (MVP)
- ì†ë„, ê±°ë¦¬, ì‹œê°„, ì‹¬ë°•ìˆ˜
- ë‹¨ìˆœ í…ìŠ¤íŠ¸ í‘œì‹œ

#### Phase 2: ê³ ê¸‰ ë©”íŠ¸ë¦­
- ì¼€ì´ë˜ìŠ¤, íŒŒì›Œ, í˜ì´ìŠ¤
- UI ì»¤ìŠ¤í„°ë§ˆì´ì§•

#### Phase 3: í†µí•© ê¸°ëŠ¥
- ë‚´ë¹„ê²Œì´ì…˜ ì•ˆë‚´
- ì•Œë¦¼ í‘œì‹œ
- ìŒì„± ëª…ë ¹

---

## 5. ê¸°ìˆ ì  ê¶Œì¥ì‚¬í•­

### 5.1 iLens Bridge App ê°œë°œ

#### í•„ìˆ˜ ê¸°ìˆ  ìŠ¤íƒ
- **Android**: Kotlin/Java
- **Garmin Mobile SDK**: Connect IQ ì•± í†µì‹ 
- **BLE ë¼ì´ë¸ŒëŸ¬ë¦¬**: Android BLE API ë˜ëŠ” RxAndroidBle
- **ë°±ê·¸ë¼ìš´ë“œ ì„œë¹„ìŠ¤**: ì§€ì†ì ì¸ ë°ì´í„° ì „ì†¡

#### í•µì‹¬ ì»´í¬ë„ŒíŠ¸

```kotlin
// 1. Garmin SDK í†µì‹ 
class GarminDataReceiver : ConnectIQListener {
    override fun onMessageReceived(
        device: IQDevice, 
        message: Any
    ) {
        val workoutData = parseWorkoutData(message)
        iLensBleClient.sendData(workoutData)
    }
}

// 2. iLens BLE í´ë¼ì´ì–¸íŠ¸
class ILensBleClient {
    private val exerciseDataUuid = 
        UUID.fromString("c259c1bd-18d3-c348-b88d-5447aea1b615")
    
    fun sendData(data: WorkoutData) {
        val packets = convertToiLensFormat(data)
        packets.forEach { characteristic.write(it) }
    }
}

// 3. ë°ì´í„° ë³€í™˜
class DataConverter {
    fun convertToiLensFormat(data: WorkoutData): List<ByteArray> {
        return listOf(
            createMetric(0x07, data.speed),
            createMetric(0x06, data.distance),
            createMetric(0x0B, data.heartRate)
        )
    }
    
    private fun createMetric(id: Int, value: Int): ByteArray {
        return byteArrayOf(id.toByte()) + 
               value.toLittleEndianBytes()
    }
}
```

### 5.2 ìµœì í™” ì „ëµ

#### ë°°í„°ë¦¬ ìµœì í™”
```kotlin
// ë°°ì¹˜ ì „ì†¡ìœ¼ë¡œ BLE wakeup ìµœì†Œí™”
class BatchedDataSender(private val interval: Long = 1000) {
    private val queue = mutableListOf<ByteArray>()
    
    fun queueData(data: ByteArray) {
        queue.add(data)
        if (queue.size >= BATCH_SIZE) {
            flush()
        }
    }
    
    fun flush() {
        bleClient.writeCharacteristic(queue)
        queue.clear()
    }
}
```

#### ì—°ê²° ì•ˆì •ì„±
```kotlin
// ì¬ì—°ê²° ë¡œì§
class ReliableBleConnection {
    private var retryCount = 0
    private val maxRetries = 3
    
    fun ensureConnected() {
        if (!bleClient.isConnected && retryCount < maxRetries) {
            bleClient.connect()
            retryCount++
        }
    }
}
```

### 5.3 ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

#### AR ë””ìŠ¤í”Œë ˆì´ ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  15.2 km/h  â”‚  152 bpm  â”‚  â† ìƒë‹¨: ì‹¤ì‹œê°„ ë©”íŠ¸ë¦­
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     5.23 km              â”‚  â† ì¤‘ì•™: ê±°ë¦¬
â”‚     25:43                â”‚  â† í•˜ë‹¨: ì‹œê°„
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ìƒ‰ìƒ ì½”ë”©
- ğŸ’š ì‹¬ë°•ìˆ˜ ì •ìƒ (120-160 bpm)
- ğŸ’› ì‹¬ë°•ìˆ˜ ê²½ê³  (160-180 bpm)
- ğŸ’” ì‹¬ë°•ìˆ˜ ìœ„í—˜ (180+ bpm)


### 5.1 ê°œë°œ ë‹¨ê³„

| Phase | ê¸°ê°„ | ì£¼ìš” ì‘ì—… | ë‚œì´ë„ |
|-------|------|-----------|--------|
| **Phase 1: MVP** | 2ì£¼ | Garmin BLE ì—°ê²°<br>iLens BLE ì—°ê²°<br>ê¸°ë³¸ ë©”íŠ¸ë¦­ ì „ì†¡ (ì†ë„, ì‹¬ë°•ìˆ˜, ì¼€ì´ë˜ìŠ¤) | â­â­â­ |
| **Phase 2: ê³ ë„í™”** | 1ì£¼ | ê±°ë¦¬/ì‹œê°„ ê³„ì‚°<br>UI/UX ê°œì„ <br>ì˜¤ë¥˜ ì²˜ë¦¬ | â­â­ |
| **Phase 3: ìµœì í™”** | 1ì£¼ | ë°°í„°ë¦¬ ìµœì í™”<br>ì¬ì—°ê²° ë¡œì§<br>ë°ì´í„° ê²€ì¦ | â­â­â­ |
| **Phase 4: ì¶œì‹œ** | 1ì£¼ | ë² íƒ€ í…ŒìŠ¤íŠ¸<br>ë¬¸ì„œí™”<br>Play Store ë°°í¬ | â­ |
| **ì´ ê¸°ê°„** | **5ì£¼** | | |

### 5.2 ê¸°ìˆ ì  ë‚œì´ë„ í‰ê°€

#### ì‰¬ìš´ ë¶€ë¶„ âœ…
- Virtual Runì€ í‘œì¤€ BLE í”„ë¡œí•„ ì‚¬ìš©
- Android BLE APIëŠ” ì„±ìˆ™í•˜ê³  ë¬¸ì„œí™”ê°€ ì˜ ë˜ì–´ ìˆìŒ
- iLens í”„ë¡œí† ì½œì´ ëª…í™•í•˜ê²Œ ì •ì˜ë˜ì–´ ìˆìŒ

#### ì¤‘ê°„ ë¶€ë¶„ âš ï¸
- BLE ì—°ê²° ì•ˆì •ì„± í™•ë³´
- ë‘ ê°œì˜ BLE ì—°ê²° ë™ì‹œ ê´€ë¦¬
- ë°ì´í„° ë™ê¸°í™” ë° ë³€í™˜ ë¡œì§

#### ì–´ë ¤ìš´ ë¶€ë¶„ âŒ
- ë°°í„°ë¦¬ ìµœì í™” (íŠ¹íˆ ì¥ì‹œê°„ ëŸ¬ë‹)
- ì—°ê²° ëŠê¹€ ì‹œ ìë™ ì¬ì—°ê²°
- ë°ì´í„° ì •í™•ë„ ê²€ì¦

### 5.3 í•„ìš” ì¥ë¹„

| ì¥ë¹„ | ìš©ë„ | ì˜ˆìƒ ë¹„ìš© |
|------|------|-----------|
| **Garmin Forerunner 265** | ê°œë°œ/í…ŒìŠ¤íŠ¸ ì›Œì¹˜ | $450 |
| **iLens Smart Glass** | í…ŒìŠ¤íŠ¸ ê¸€ë˜ìŠ¤ | ì œí’ˆ ê°€ê²© |
| **Android í°** | ë¸Œë¦¬ì§€ ì•± ì‹¤í–‰ | ê¸°ì¡´ ì¥ë¹„ í™œìš© |
| **(ì„ íƒ) Stryd Footpod** | ì •í™•ë„ í–¥ìƒ | $200 |

---

## 6. ì„±ëŠ¥ ë° ì‚¬ìš©ì ê²½í—˜

### 6.1 ì˜ˆìƒ ì„±ëŠ¥ ì§€í‘œ

| ì§€í‘œ | Virtual Run ë°©ì‹ | Connect IQ ë°©ì‹ |
|------|------------------|------------------|
| **ì§€ì—° ì‹œê°„** | 50-100ms | 200-500ms |
| **ë°ì´í„° ì—…ë°ì´íŠ¸ ì£¼ê¸°** | 1ì´ˆ | 1-2ì´ˆ |
| **ë°°í„°ë¦¬ ì†Œëª¨ (ì›Œì¹˜)** | +5% | +10% |
| **ë°°í„°ë¦¬ ì†Œëª¨ (í°)** | +8% | +15% |
| **ì—°ê²° ì•ˆì •ì„±** | 95% | 85% |

### 6.2 AR ë””ìŠ¤í”Œë ˆì´ ë ˆì´ì•„ì›ƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   iLens Smart Glass Display    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚     â”‚ 15.2 km/hâ”‚ 152 bpm â”‚    â”‚  â† ìƒë‹¨: ì‹¤ì‹œê°„ í•µì‹¬ ë©”íŠ¸ë¦­
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                â”‚
â”‚        â•”â•â•â•â•â•â•â•â•â•â•â•—             â”‚
â”‚        â•‘ 5.23 km  â•‘             â”‚  â† ì¤‘ì•™: ëˆ„ì  ê±°ë¦¬ (ê°•ì¡°)
â”‚        â•šâ•â•â•â•â•â•â•â•â•â•â•             â”‚
â”‚                                â”‚
â”‚     25:43        176 spm       â”‚  â† í•˜ë‹¨: ì‹œê°„, ì¼€ì´ë˜ìŠ¤
â”‚                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.3 ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤ 1: ì•„ì¹¨ ì¡°ê¹… (5km)
```
1. Forerunnerì—ì„œ "Virtual Run" ì‹œì‘
2. iLens ì•±ì´ ìë™ìœ¼ë¡œ ì›Œì¹˜ ê°ì§€
3. "Connected" ì•Œë¦¼
4. ì¡°ê¹… ì‹œì‘
5. AR ê¸€ë˜ìŠ¤ì— ì‹¤ì‹œê°„ ë©”íŠ¸ë¦­ í‘œì‹œ
6. ëª©í‘œ ê±°ë¦¬ ë„ë‹¬ ì‹œ ì§„ë™ ì•Œë¦¼
7. ì¡°ê¹… ì¢…ë£Œ â†’ ì›Œì¹˜ì— ê¸°ë¡ ì €ì¥
```

**ì‚¬ìš©ì ê²½í—˜**:
- âœ… í•¸ì¦ˆí”„ë¦¬ë¡œ ë©”íŠ¸ë¦­ í™•ì¸
- âœ… ìì—°ìŠ¤ëŸ¬ìš´ ì‹œì„  ì²˜ë¦¬
- âœ… ì•ˆì „í•œ ëŸ¬ë‹ (ì „ë°© ì£¼ì‹œ)

#### ì‹œë‚˜ë¦¬ì˜¤ 2: í•˜í”„ ë§ˆë¼í†¤ í›ˆë ¨
```
1. Stryd í’‹íŒŸ â†’ Forerunner ì—°ê²°
2. Virtual Run ì‹œì‘
3. iLens ì•± ì—°ê²°
4. 21.1km ì¥ê±°ë¦¬ ëŸ¬ë‹
5. ì‹¤ì‹œê°„ í˜ì´ì‹± ëª¨ë‹ˆí„°ë§
6. ì‹¬ë°•ìˆ˜ ì¡´ ê´€ë¦¬
7. ì™„ë£Œ í›„ ë°ì´í„° Garmin Connect ë™ê¸°í™”
```

**ì¥ì **:
- ì •í™•í•œ í˜ì´ì‹± (Stryd ì‚¬ìš©)
- ì‹¬ë°•ìˆ˜ ê¸°ë°˜ ê°•ë„ ì¡°ì ˆ
- ì™„ì „í•œ ë°ì´í„° ê¸°ë¡

---

## 7. ê²°ë¡  ë° ê¶Œì¥ì‚¬í•­

### 7.1 í•µì‹¬ ë°œê²¬ì‚¬í•­

#### âœ… Virtual Runì€ ì™„ë²½í•œ ì†”ë£¨ì…˜

1. **ì§ì ‘ BLE ì—°ê²°**
   - Garmin Connect Mobile ë¶ˆí•„ìš”
   - ë‹¨ìˆœí•˜ê³  ì•ˆì •ì ì¸ 2-tier ì•„í‚¤í…ì²˜
   - ë‚®ì€ ì§€ì—° ì‹œê°„

2. **í‘œì¤€ í”„ë¡œí† ì½œ ì‚¬ìš©**
   - BLE RSC + HR í”„ë¡œí•„
   - í˜¸í™˜ì„± ìš°ìˆ˜
   - ê°œë°œ ë³µì¡ë„ ë‚®ìŒ

3. **ì™„ë²½í•œ ëŸ¬ë„ˆìš© ê¸°ëŠ¥**
   - iLensê°€ í•„ìš”í•œ ëª¨ë“  ë©”íŠ¸ë¦­ ì§€ì›
   - ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
   - í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°

4. **ê²€ì¦ëœ ê¸°ìˆ **
   - Zwift, TrainerRoad ë“± ìˆ˜ë§ì€ ì•±ì—ì„œ ì´ë¯¸ ì‚¬ìš© ì¤‘
   - Garmin ê³µì‹ ì§€ì›
   - ì•ˆì •ì ì¸ íŒì›¨ì–´

### 7.2 Forerunner + iLens: ëŸ¬ë„ˆë¥¼ ìœ„í•œ ê¶ê·¹ì˜ ì¡°í•©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ì´ìƒì ì¸ ëŸ¬ë‹ ì…‹ì—…              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  ğŸ‘Ÿ Stryd Footpod (ì„ íƒ)                â”‚
â”‚      â†“ ANT+                             â”‚
â”‚  âŒš Garmin Forerunner 265               â”‚
â”‚      â†“ BLE (Virtual Run)                â”‚
â”‚  ğŸ“± iLens Bridge App                    â”‚
â”‚      â†“ BLE                              â”‚
â”‚  ğŸ•¶ï¸ iLens Smart Glass                  â”‚
â”‚                                         â”‚
â”‚  ê²°ê³¼:                                  â”‚
â”‚  â€¢ ì™„ë²½í•œ í•¸ì¦ˆí”„ë¦¬ ê²½í—˜                â”‚
â”‚  â€¢ ì‹¤ì‹œê°„ AR ë©”íŠ¸ë¦­                    â”‚
â”‚  â€¢ ì•ˆì „í•œ ì „ë°© ì£¼ì‹œ                    â”‚
â”‚  â€¢ ëª¨ë“  ë°ì´í„° ìë™ ê¸°ë¡               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.3 ê°œë°œ ê¶Œì¥ì‚¬í•­

#### ì¦‰ì‹œ ì‹œì‘ ê°€ëŠ¥ âœ…
- Virtual Runì€ ì´ë¯¸ ì¶œì‹œëœ ê¸°ëŠ¥
- í•„ìš”í•œ ëª¨ë“  ë¬¸ì„œ ì¡´ì¬
- ê°œë°œ ë‚œì´ë„ ì¤‘ê°„ ìˆ˜ì¤€

#### ìš°ì„  ìˆœìœ„ ğŸ“‹
1. **MVP ê°œë°œ** (2ì£¼): ê¸°ë³¸ ë©”íŠ¸ë¦­ ì „ì†¡
2. **ë² íƒ€ í…ŒìŠ¤íŠ¸** (1ì£¼): ì‹¤ì œ ëŸ¬ë‹ í™˜ê²½ í…ŒìŠ¤íŠ¸
3. **ìµœì í™”** (1ì£¼): ë°°í„°ë¦¬ ë° ì•ˆì •ì„±
4. **ì¶œì‹œ** (1ì£¼): Play Store ë°°í¬

#### ì˜ˆìƒ íˆ¬ì ğŸ’°
- **ê°œë°œ ì‹œê°„**: 5ì£¼
- **ì¥ë¹„ ë¹„ìš©**: $450-650
- **ê°œë°œì**: Android ê°œë°œì 1ëª…
- **ì´ ë¹„ìš©**: ì†Œê·œëª¨ í”„ë¡œì íŠ¸ë¡œ ì í•©

### 7.4 ì‹œì¥ ì ì¬ë ¥

#### íƒ€ê²Ÿ ì‚¬ìš©ì
- ğŸ“Š ì§„ì§€í•œ ëŸ¬ë„ˆ (ì£¼ 3íšŒ ì´ìƒ)
- ğŸƒ ë§ˆë¼í†¤ í›ˆë ¨ì
- ğŸ”¬ ë°ì´í„° ì¤‘ì‹¬ ëŸ¬ë„ˆ
- ğŸ†• ì–¼ë¦¬ì–´ë‹µí„°

#### ì°¨ë³„í™” ìš”ì†Œ
- âœ¨ **ìœ ì¼í•œ Garmin + AR í†µí•©**
- âš¡ **ì‹¤ì‹œê°„ ì„±ëŠ¥ (50ms ì§€ì—°)**
- ğŸ”‹ **ë°°í„°ë¦¬ íš¨ìœ¨ì **
- ğŸ“± **ì„¤ì¹˜ ê°„ë‹¨**

### 7.5 ìµœì¢… í‰ê°€

| í‰ê°€ í•­ëª© | ì ìˆ˜ | ë¹„ê³  |
|-----------|------|------|
| **ê¸°ìˆ ì  ì‹¤í˜„ ê°€ëŠ¥ì„±** | â­â­â­â­â­ | Virtual Run ë•ë¶„ì— ì™„ë²½ |
| **ê°œë°œ ë‚œì´ë„** | â­â­â­ | ì¤‘ê°„, BLE ê²½í—˜ í•„ìš” |
| **ì‚¬ìš©ì ê²½í—˜** | â­â­â­â­â­ | í•¸ì¦ˆí”„ë¦¬, ì§ê´€ì  |
| **ì‹œì¥ ì í•©ì„±** | â­â­â­â­ | ë‹ˆì¹˜ ì‹œì¥, ê³ ê´€ì—¬ ì‚¬ìš©ì |
| **í™•ì¥ ê°€ëŠ¥ì„±** | â­â­â­â­ | ì‚¬ì´í´ë§, ë‹¤ë¥¸ ìŠ¤í¬ì¸  |

**ì¢…í•© í‰ê°€**: â­â­â­â­â­ **ê°•ë ¥ ì¶”ì²œ**

---

## 8. ë‹¤ìŒ ë‹¨ê³„

### 8.1 ì¦‰ì‹œ ì‹¤í–‰ ê°€ëŠ¥í•œ ì•¡ì…˜

1. **Forerunner 265 êµ¬ë§¤** + Virtual Run ê¸°ëŠ¥ í™•ì¸
2. **Android Studio í”„ë¡œì íŠ¸ ìƒì„±**
3. **BLE ìŠ¤ìºë„ˆ ì•±** ë§Œë“¤ì–´ì„œ Virtual Run ì‹ í˜¸ í™•ì¸
4. **iLens í”„ë¡œí† ì½œ í…ŒìŠ¤íŠ¸** (ê°„ë‹¨í•œ ë©”íŠ¸ë¦­ ì „ì†¡)

### 8.2 PoC (Proof of Concept) - 1ì£¼

```kotlin
// ìµœì†Œ PoC ì½”ë“œ (100ì¤„)
class MinimalPoC {
    fun connectGarmin() {
        // RSC ì„œë¹„ìŠ¤ ìŠ¤ìº”
        // ì†ë„ ë°ì´í„° ìˆ˜ì‹ 
    }
    
    fun connectiLens() {
        // iLens ì—°ê²°
        // ì†ë„ ë°ì´í„° ì „ì†¡
    }
    
    fun bridge() {
        // Garmin â†’ iLens ë°ì´í„° ì „ë‹¬
    }
}
```

### 8.3 í”„ë¡œí† íƒ€ì… - 2ì£¼

- UI ì¶”ê°€
- ëª¨ë“  ë©”íŠ¸ë¦­ ì§€ì›
- ê¸°ë³¸ ì˜¤ë¥˜ ì²˜ë¦¬

### 8.4 ì œí’ˆí™” - 2ì£¼

- ë°°í„°ë¦¬ ìµœì í™”
- ì•ˆì •ì„± ê°•í™”
- ì‚¬ìš©ì ì„¤ì •

---

## ë¶€ë¡ A: Virtual Run ì„¤ì • ê°€ì´ë“œ

### Forerunnerì—ì„œ Virtual Run í™œì„±í™”

1. **ì›Œì¹˜ì—ì„œ**:
   ```
   START ë²„íŠ¼ ëˆ„ë¥´ê¸°
   â†’ ìŠ¤í¬ì¸  í”„ë¡œí•„ ëª©ë¡ ìŠ¤í¬ë¡¤
   â†’ í•˜ë‹¨ "+ ì¶”ê°€" ì„ íƒ
   â†’ "Virtual Run" ì„ íƒ
   â†’ ì¶”ê°€ ì™„ë£Œ
   ```

2. **Virtual Run ì‹œì‘**:
   ```
   START â†’ Virtual Run ì„ íƒ
   â†’ "Ready to pair" í™”ë©´ í‘œì‹œ
   â†’ iLens ì•±ì—ì„œ ê²€ìƒ‰
   â†’ ì—°ê²° ì™„ë£Œ
   â†’ START ëˆŒëŸ¬ì„œ ê¸°ë¡ ì‹œì‘ (ì„ íƒ)
   ```

### iLens ì•±ì—ì„œ ì—°ê²°

1. ì•± ì‹¤í–‰
2. "Garmin ì›Œì¹˜ ê²€ìƒ‰" ë²„íŠ¼
3. "Forerunner 265" ì„ íƒ
4. "ì—°ê²°ë¨" ìƒíƒœ í™•ì¸
5. ëŸ¬ë‹ ì‹œì‘!

---

## ë¶€ë¡ B: íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: ì›Œì¹˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ

**í•´ê²°ì±…**:
- Garmin Connect Mobile ì•± ì™„ì „íˆ ì¢…ë£Œ (BLE ì¶©ëŒ ë°©ì§€)
- ì›Œì¹˜ì—ì„œ Virtual Runì´ "Ready to pair" ìƒíƒœì¸ì§€ í™•ì¸
- ì•ˆë“œë¡œì´ë“œ ìœ„ì¹˜ ê¶Œí•œ í™•ì¸ (BLE ìŠ¤ìº”ì— í•„ìš”)
- ë¸”ë£¨íˆ¬ìŠ¤ ê»ë‹¤ ì¼œê¸°

### ë¬¸ì œ 2: ì—°ê²°ì€ ë˜ì§€ë§Œ ë°ì´í„°ê°€ ì•ˆ ì˜´

**í•´ê²°ì±…**:
- ì›Œì¹˜ì—ì„œ START ë²„íŠ¼ ëˆŒëŸ¬ì„œ í™œë™ ì‹œì‘
- Notification í™œì„±í™” í™•ì¸
- ì†ëª©ì„ ì›€ì§ì—¬ì„œ ì†ë„ ê°ì§€ ì‹œì‘

### ë¬¸ì œ 3: ì†ë„ê°€ ë¶€ì •í™•

**í•´ê²°ì±…**:
- Stryd ë˜ëŠ” Garmin Footpod ì‚¬ìš©
- ì›Œì¹˜ ì„¤ì •ì—ì„œ footpodë¥¼ "í•­ìƒ" ì‚¬ìš©ìœ¼ë¡œ ì„¤ì •
- Virtual Runì´ footpod ë°ì´í„°ë¥¼ ì¬ì „ì†¡í•˜ë„ë¡ ì„¤ì •

### ë¬¸ì œ 4: ë°°í„°ë¦¬ê°€ ë¹¨ë¦¬ ë‹³ìŒ

**í•´ê²°ì±…**:
- ë°°ì¹˜ ì „ì†¡ ì‚¬ìš© (1ì´ˆ ê°„ê²©)
- ìŠ¤í¬ë¦° ìë™ êº¼ì§ ì„¤ì •
- ë°±ê·¸ë¼ìš´ë“œ ì„œë¹„ìŠ¤ ìµœì í™”

---

## ë¶€ë¡ C: ì°¸ê³  ì½”ë“œ - ì™„ì „í•œ êµ¬í˜„

### ì „ì²´ MainActivity.kt

```kotlin
class MainActivity : ComponentActivity() {
    private val viewModel: MainViewModel by viewModels()
    
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        
        requestPermissions()
        
        setContent {
            ILensBridgeTheme {
                MainScreen(viewModel)
            }
        }
    }
    
    private fun requestPermissions() {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.S) {
            requestPermissions(
                arrayOf(
                    Manifest.permission.BLUETOOTH_SCAN,
                    Manifest.permission.BLUETOOTH_CONNECT,
                    Manifest.permission.ACCESS_FINE_LOCATION
                ),
                REQUEST_CODE
            )
        }
    }
}
```

### ì „ì²´ MainViewModel.kt

```kotlin
@HiltViewModel
class MainViewModel @Inject constructor(
    private val garminRepo: GarminBleRepository,
    private val iLensRepo: ILensBleRepository
) : ViewModel() {
    
    private val _uiState = MutableStateFlow(UiState())
    val uiState: StateFlow<UiState> = _uiState.asStateFlow()
    
    init {
        observeRunningData()
    }
    
    fun connectGarmin() {
        viewModelScope.launch {
            garminRepo.scanForGarminWatch { device ->
                garminRepo.connectToWatch(device)
                _uiState.update { it.copy(garminConnected = true) }
            }
        }
    }
    
    fun connectiLens() {
        viewModelScope.launch {
            try {
                iLensRepo.connectToiLens(ILENS_MAC_ADDRESS)
                _uiState.update { it.copy(ilensConnected = true) }
            } catch (e: Exception) {
                // Handle error
            }
        }
    }
    
    private fun observeRunningData() {
        viewModelScope.launch {
            garminRepo.runningData
                .filterNotNull()
                .collect { data ->
                    _uiState.update { 
                        it.copy(runningData = data)
                    }
                    sendToiLens(data)
                }
        }
    }
    
    private fun sendToiLens(data: RunningData) {
        iLensRepo.sendSpeed(data.speedKmh.toInt())
        iLensRepo.sendCadence(data.cadenceSpm)
        iLensRepo.sendHeartRate(data.heartRate)
    }
}

data class UiState(
    val garminConnected: Boolean = false,
    val ilensConnected: Boolean = false,
    val runningData: RunningData? = null,
    val totalDistance: Int = 0,
    val elapsedTime: Int = 0
)
```

---

## ì°¸ê³  ìë£Œ

### ê³µì‹ ë¬¸ì„œ
- [Garmin Virtual Run Feature Guide](https://support.garmin.com/en-US/?faq=pyniXQfLiu3BS1yKFlLn36)
- [Garmin Forerunner 265 Manual](https://www8.garmin.com/manuals/webhelp/GUID-F41EAFB3-6CC9-42DE-9C6C-9E358DBB0671/)
- [Android BLE Guide](https://developer.android.com/guide/topics/connectivity/bluetooth/ble-overview)
- [BLE Running Speed and Cadence Service](https://www.bluetooth.com/specifications/specs/running-speed-and-cadence-service-1-0/)

### ê¸°ìˆ  ë¸”ë¡œê·¸
- [DC Rainmaker - Garmin Virtual Run Review](https://www.dcrainmaker.com/2020/01/bluetooth-running-broadcasting.html)
- [Zwift - Using Garmin Virtual Run](https://www.zwift.com/news/21435-garmin-virtual-run-profile)

### ì˜¤í”ˆì†ŒìŠ¤ ì°¸ê³ 
- [ftmstorscble](https://github.com/sirfergy/ftmstorscble) - BLE RSC êµ¬í˜„ ì˜ˆì œ

### ì»¤ë®¤ë‹ˆí‹°
- [Garmin Forums - Virtual Run](https://forums.garmin.com/sports-fitness/running-multisport/f/forerunner-945/213343/virtual-run-and-zwift)
- [Reddit r/Garmin](https://www.reddit.com/r/Garmin/)

---

**ë¬¸ì„œ ë²„ì „**: 2.0 (Virtual Run ì¤‘ì‹¬ ì¬ì‘ì„±)  
**ìµœì¢… ìˆ˜ì •ì¼**: 2025-10-23  
**ì‘ì„±ì**: Technical Analysis Team

**ë³€ê²½ ì´ë ¥**:
- v2.0: Virtual Run ê¸°ë°˜ ì§ì ‘ BLE í†µí•© ë°©ì‹ìœ¼ë¡œ ì „ë©´ ìˆ˜ì •
- v1.0: Connect IQ Communications API ê¸°ë°˜ ì´ˆì•ˆ

### 6.1 í•µì‹¬ ë°œê²¬ì‚¬í•­

1. **Garmin ì›Œì¹˜ì™€ iLensì˜ ì§ì ‘ ì—°ê²°ì€ ë¶ˆê°€ëŠ¥**
   - ë‘ ê¸°ê¸° ëª¨ë‘ ìŠ¤ë§ˆíŠ¸í° ì¤‘ì‹¬ ì•„í‚¤í…ì²˜
   - í”„ë¡œí† ì½œ ë° í†µì‹  ë°©ì‹ ë¶ˆì¼ì¹˜

2. **ì¤‘ê°œ ì•±ì„ í†µí•œ í†µí•©ì€ ë§¤ìš° ì‹¤í˜„ ê°€ëŠ¥**
   - iLensëŠ” ëŸ¬ë‹ ë°ì´í„°ë¥¼ ì™„ë²½í•˜ê²Œ ì§€ì›
   - Garmin Mobile SDKëŠ” ì„±ìˆ™í•œ í”Œë«í¼
   - ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ê°€ëŠ¥

3. **Forerunner + iLensëŠ” ì´ìƒì ì¸ ì¡°í•©**
   - ëŸ¬ë„ˆë¥¼ ìœ„í•œ ì™„ì „í•œ AR ê²½í—˜
   - ëª¨ë“  í•„ìˆ˜ ë©”íŠ¸ë¦­ ì§€ì›
   - í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜

### 6.2 ê°œë°œ ë¡œë“œë§µ

```
Phase 1 (4-6ì£¼): MVP ê°œë°œ
â”œâ”€ iLens Bridge App ê¸°ë³¸ êµ¬ì¡°
â”œâ”€ Garmin SDK í†µí•©
â”œâ”€ ê¸°ë³¸ ë©”íŠ¸ë¦­ ì „ì†¡ (ì†ë„, ê±°ë¦¬, ì‹¬ë°•)
â””â”€ ì•ˆì •ì„± í…ŒìŠ¤íŠ¸

Phase 2 (4ì£¼): ê³ ê¸‰ ê¸°ëŠ¥
â”œâ”€ ëª¨ë“  ë©”íŠ¸ë¦­ ì§€ì›
â”œâ”€ UI ì»¤ìŠ¤í„°ë§ˆì´ì§•
â”œâ”€ ë°°í„°ë¦¬ ìµœì í™”
â””â”€ ì˜¤ë¥˜ ì²˜ë¦¬ ê°•í™”

Phase 3 (4ì£¼): í†µí•© ê¸°ëŠ¥
â”œâ”€ ë‚´ë¹„ê²Œì´ì…˜ í†µí•©
â”œâ”€ ì•Œë¦¼ ì‹œìŠ¤í…œ
â”œâ”€ ìŒì„± ëª…ë ¹
â””â”€ ì‚¬ìš©ì ì„¤ì •

Phase 4 (2ì£¼): ì¶œì‹œ ì¤€ë¹„
â”œâ”€ ë² íƒ€ í…ŒìŠ¤íŠ¸
â”œâ”€ ë¬¸ì„œí™”
â””â”€ Play Store ë°°í¬
```

### 6.3 ì˜ˆìƒ ì„±ê³¼

**ê¸°ìˆ ì  ì„±ê³¼**:
- âœ… ì•ˆì •ì ì¸ ì‹¤ì‹œê°„ ë°ì´í„° ì „ì†¡
- âœ… 100-300ms ë ˆì´í„´ì‹œ
- âœ… ë°°í„°ë¦¬ ì˜í–¥ ìµœì†Œí™” (< 5% ì¶”ê°€ ì†Œëª¨)

**ì‚¬ìš©ì ê²½í—˜**:
- âœ… í•¸ì¦ˆí”„ë¦¬ ìš´ë™ ë°ì´í„° í™•ì¸
- âœ… ì‹œì„  ì´ë™ ìµœì†Œí™”
- âœ… ì•ˆì „í•œ ëŸ¬ë‹

---

## 7. ì°¸ê³  ìë£Œ

### 7.1 ê´€ë ¨ ë¬¸ì„œ
- [Garmin Connect IQ Developer Guide](https://developer.garmin.com/connect-iq/)
- [Garmin Mobile SDK Documentation](https://developer.garmin.com/connect-iq/core-topics/mobile-sdk/)
- iLens BLE Protocol v1.0.10 (ë³¸ ë¶„ì„ì˜ ê¸°ë°˜)

### 7.2 ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸
- [GarminLive by basva923](https://github.com/basva923/GarminLive)
  - Garmin ë°ì´í„°ë¥¼ Android ì•±ìœ¼ë¡œ ì „ì†¡í•˜ëŠ” ì°¸ê³  êµ¬í˜„

### 7.3 ê¸°ìˆ  ìŠ¤íƒ
- **Android Development**: Kotlin, Jetpack Compose
- **BLE**: Android BLE API, RxAndroidBle
- **Garmin**: Connect IQ SDK, Mobile SDK
- **Testing**: JUnit, Espresso, BLE ì‹œë®¬ë ˆì´í„°

---

